{"ast":null,"code":"import _regeneratorRuntime from \"/home/dml-sb/project/digi-react-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/dml-sb/project/digi-react-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/dml-sb/project/digi-react-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/dml-sb/project/digi-react-admin/src/component/User/Tables/UserTable.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport { Row, Col, Card } from \"react-bootstrap\";\nimport { useParams } from \"react-router-dom\";\nimport { Button } from \"reactstrap\";\nimport { useHistory } from \"react-router-dom\";\nimport ModifiedTable from \"../../ReusableComponents/Table/Table\";\nimport Paging from \"../../ReusableComponents/Pagination/Paging\";\nimport { connect } from \"react-redux\";\nimport SearchBar from \"../../ReusableComponents/SearchBar/SearchBar\";\nimport ModifiedLoader from \"../../ReusableComponents/Loader/loader\";\nimport ToggleButton from \"../../ReusableComponents/ToggleButton/ToggleButton\";\nimport TableAction from \"../../ReusableComponents/Actions/TableAction\";\nimport DeleteModal from \"../../ReusableComponents/CustomModal/DeleteModal/DeleteModal\";\nimport ModalSpinner from \"../../ReusableComponents/Loader/ModalSpinner/ModalSpinner\";\nimport \"./table.css\";\nimport ToggleNotification from \"../../ReusableComponents/Toggle Notifications/ToggleNotification\";\nimport { changingStatus, deletingUser, gettingAllUser } from \"../../../redux/actions/userAction\";\n\nvar User = function User(props) {\n  var history = useHistory();\n\n  var _useParams = useParams(),\n      page = _useParams.page,\n      search = _useParams.search;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      nameSearch = _useState2[0],\n      setNameSearch = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      errorModal = _useState6[0],\n      setErrorModal = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      modalOpen = _useState8[0],\n      setModalOpen = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      loader = _useState10[0],\n      setLoader = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      deleteId = _useState12[0],\n      setDeleteId = _useState12[1];\n\n  useEffect(function () {\n    getData();\n  }, []);\n\n  var getData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n\n              if (search) {\n                window.location.href = \"/users/1\";\n              }\n\n              _context.next = 4;\n              return props.getAllUser(page, null);\n\n            case 4:\n              res = _context.sent;\n              setErrorModal(res);\n              setLoading(false);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var searchName = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var pageNumber,\n          name,\n          nameString,\n          res,\n          _args2 = arguments;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              pageNumber = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : page;\n              name = _args2.length > 1 ? _args2[1] : undefined;\n              setNameSearch(name);\n              nameString = name.replace(/[^a-zA-Z ]/g, \"%20\");\n              history.push(\"/users/\".concat(pageNumber, \"/\").concat(nameString));\n              setLoading(true);\n              _context2.next = 8;\n              return props.getAllUser(pageNumber, name);\n\n            case 8:\n              res = _context2.sent;\n              setErrorModal(res);\n              setLoading(false);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function searchName() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var searchPage = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(number) {\n      var nameString, res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              nameString = nameSearch.replace(/[^a-zA-Z ]/g, \"%20\");\n              history.push(\"/users/\".concat(number, \"/\").concat(nameString));\n              setLoading(true);\n              _context3.next = 5;\n              return props.getAllUser(number, nameSearch);\n\n            case 5:\n              res = _context3.sent;\n              setErrorModal(res);\n              setLoading(false);\n\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function searchPage(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var userDelete = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              modalOpenHandler();\n              setLoader(true);\n              _context4.next = 4;\n              return props.deleteUser(deleteId);\n\n            case 4:\n              res = _context4.sent;\n\n              if (res === 200) {\n                ToggleNotification(\"DeleteUserSuccess\");\n                setLoader(false);\n                setTimeout(function () {\n                  window.location.href = \"/users/1\";\n                }, 1000); // history.push(\"/users/1\");\n              } else {\n                setLoader(false);\n                ToggleNotification(\"ServerError\");\n              }\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function userDelete() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var modalOpenHandler = function modalOpenHandler(id) {\n    setModalOpen(!modalOpen);\n    setDeleteId(id);\n  };\n\n  var updatedDate = function updatedDate(data) {\n    if (data) {\n      var str = data.split(\"T\");\n      var time = str[1].split(\".\");\n      return time[0] + \" \" + str[0];\n    } else {\n      return null;\n    }\n  };\n\n  var data = [{\n    name: \"S.No.\"\n  }, {\n    name: \"Name\"\n  }, {\n    name: \"Email\"\n  }, {\n    name: \"Created-At\"\n  }, {\n    name: \"Status\"\n  }, {\n    name: \"Actions\",\n    style: \"center\"\n  }];\n  var tableData = [{\n    name: \"view\"\n  }, {\n    name: \"update\"\n  }, {\n    name: \"delete\"\n  }];\n\n  var toggleButtonHandler = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id, status) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return props.changeStatus(id, status);\n\n            case 2:\n              res = _context5.sent;\n              return _context5.abrupt(\"return\", res);\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function toggleButtonHandler(_x2, _x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DeleteModal, {\n    status: modalOpen,\n    name: \"user\",\n    deleteHandler: userDelete,\n    closeModal: modalOpenHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }), loader ? /*#__PURE__*/React.createElement(ModalSpinner, {\n    data: loader,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }) : null, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    as: \"h5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, \"User Data\"), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"primary\",\n    className: \"float-right\",\n    onClick: function onClick(e) {\n      return history.push(\"/add-user\");\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }\n  }, \"Add\"), /*#__PURE__*/React.createElement(SearchBar, {\n    type: \"user\",\n    name: searchName,\n    status: errorModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Card.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, loading ? /*#__PURE__*/React.createElement(ModifiedLoader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(ModifiedTable, {\n    status: errorModal,\n    data: data,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, props.userList && props.userList.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: item.id // onClick={(e) => history.push(`/user/${item.id}`)}\n      ,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 27\n      }\n    }, page * 10 - 10 + (index + 1)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 27\n      }\n    }, item.fname + \" \" + item.lname), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 27\n      }\n    }, item.email), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 27\n      }\n    }, updatedDate(item.created_at)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(ToggleButton, {\n      name: \"user\",\n      changeToggle: function changeToggle() {\n        return toggleButtonHandler(item.id, item.status);\n      },\n      id: item.id,\n      status: item.status ? item.status : null,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(TableAction, {\n      data: tableData,\n      updateURL: \"/update-user?id=\".concat(item.id),\n      viewURL: \"/user?id=\".concat(item.id),\n      deleteHandler: function deleteHandler() {\n        return modalOpenHandler(item.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 29\n      }\n    })));\n  })), /*#__PURE__*/React.createElement(Paging, {\n    status: errorModal,\n    page: page,\n    type: \"user\",\n    searchPage: searchPage,\n    totalCount: props.totalPage ? props.totalPage : null,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userList: state.users.users,\n    totalPage: state.users.pages\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getAllUser: function getAllUser(page, search) {\n      return dispatch(gettingAllUser(page, search));\n    },\n    deleteUser: function deleteUser(id) {\n      return dispatch(deletingUser(id));\n    },\n    changeStatus: function changeStatus(id, status) {\n      return dispatch(changingStatus(id, status));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(User);","map":{"version":3,"sources":["/home/dml-sb/project/digi-react-admin/src/component/User/Tables/UserTable.js"],"names":["React","useState","useEffect","Row","Col","Card","useParams","Button","useHistory","ModifiedTable","Paging","connect","SearchBar","ModifiedLoader","ToggleButton","TableAction","DeleteModal","ModalSpinner","ToggleNotification","changingStatus","deletingUser","gettingAllUser","User","props","history","page","search","nameSearch","setNameSearch","loading","setLoading","errorModal","setErrorModal","modalOpen","setModalOpen","loader","setLoader","deleteId","setDeleteId","getData","window","location","href","getAllUser","res","searchName","pageNumber","name","nameString","replace","push","searchPage","number","userDelete","modalOpenHandler","deleteUser","setTimeout","id","updatedDate","data","str","split","time","style","tableData","toggleButtonHandler","status","changeStatus","e","userList","map","item","index","fname","lname","email","created_at","totalPage","mapStateToProps","state","users","pages","mapDispatchToProps","dispatch"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,QAA+B,iBAA/B;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,MAAT,QAAuB,YAAvB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,aAAP,MAA0B,sCAA1B;AACA,OAAOC,MAAP,MAAmB,4CAAnB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,SAAP,MAAsB,8CAAtB;AACA,OAAOC,cAAP,MAA2B,wCAA3B;AACA,OAAOC,YAAP,MAAyB,oDAAzB;AACA,OAAOC,WAAP,MAAwB,8CAAxB;AACA,OAAOC,WAAP,MAAwB,8DAAxB;AACA,OAAOC,YAAP,MAAyB,2DAAzB;AACA,OAAO,aAAP;AACA,OAAOC,kBAAP,MAA+B,kEAA/B;AAEA,SACEC,cADF,EAEEC,YAFF,EAGEC,cAHF,QAIO,mCAJP;;AAMA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD,EAAW;AACtB,MAAMC,OAAO,GAAGhB,UAAU,EAA1B;;AACA,mBAAyBF,SAAS,EAAlC;AAAA,MAAQmB,IAAR,cAAQA,IAAR;AAAA,MAAcC,MAAd,cAAcA,MAAd;;AACA,kBAAoCzB,QAAQ,CAAC,EAAD,CAA5C;AAAA;AAAA,MAAO0B,UAAP;AAAA,MAAmBC,aAAnB;;AACA,mBAA8B3B,QAAQ,CAAC,KAAD,CAAtC;AAAA;AAAA,MAAO4B,OAAP;AAAA,MAAgBC,UAAhB;;AACA,mBAAoC7B,QAAQ,EAA5C;AAAA;AAAA,MAAO8B,UAAP;AAAA,MAAmBC,aAAnB;;AACA,mBAAkC/B,QAAQ,CAAC,KAAD,CAA1C;AAAA;AAAA,MAAOgC,SAAP;AAAA,MAAkBC,YAAlB;;AACA,mBAA4BjC,QAAQ,CAAC,KAAD,CAApC;AAAA;AAAA,MAAOkC,MAAP;AAAA,MAAeC,SAAf;;AACA,oBAAgCnC,QAAQ,EAAxC;AAAA;AAAA,MAAOoC,QAAP;AAAA,MAAiBC,WAAjB;;AAEApC,EAAAA,SAAS,CAAC,YAAM;AACdqC,IAAAA,OAAO;AACR,GAFQ,EAEN,EAFM,CAAT;;AAIA,MAAMA,OAAO;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACdT,cAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,kBAAIJ,MAAJ,EAAY;AACVc,gBAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,UAAvB;AACD;;AAJa;AAAA,qBAKInB,KAAK,CAACoB,UAAN,CAAiBlB,IAAjB,EAAuB,IAAvB,CALJ;;AAAA;AAKRmB,cAAAA,GALQ;AAMdZ,cAAAA,aAAa,CAACY,GAAD,CAAb;AACAd,cAAAA,UAAU,CAAC,KAAD,CAAV;;AAPc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAPS,OAAO;AAAA;AAAA;AAAA,KAAb;;AAUA,MAAMM,UAAU;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAOC,cAAAA,UAAP,8DAAoBrB,IAApB;AAA0BsB,cAAAA,IAA1B;AACjBnB,cAAAA,aAAa,CAACmB,IAAD,CAAb;AACMC,cAAAA,UAFW,GAEED,IAAI,CAACE,OAAL,CAAa,aAAb,EAA4B,KAA5B,CAFF;AAGjBzB,cAAAA,OAAO,CAAC0B,IAAR,kBAAuBJ,UAAvB,cAAqCE,UAArC;AACAlB,cAAAA,UAAU,CAAC,IAAD,CAAV;AAJiB;AAAA,qBAKCP,KAAK,CAACoB,UAAN,CAAiBG,UAAjB,EAA6BC,IAA7B,CALD;;AAAA;AAKXH,cAAAA,GALW;AAMjBZ,cAAAA,aAAa,CAACY,GAAD,CAAb;AACAd,cAAAA,UAAU,CAAC,KAAD,CAAV;;AAPiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVe,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAUA,MAAMM,UAAU;AAAA,yEAAG,kBAAOC,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACXJ,cAAAA,UADW,GACErB,UAAU,CAACsB,OAAX,CAAmB,aAAnB,EAAkC,KAAlC,CADF;AAEjBzB,cAAAA,OAAO,CAAC0B,IAAR,kBAAuBE,MAAvB,cAAiCJ,UAAjC;AACAlB,cAAAA,UAAU,CAAC,IAAD,CAAV;AAHiB;AAAA,qBAICP,KAAK,CAACoB,UAAN,CAAiBS,MAAjB,EAAyBzB,UAAzB,CAJD;;AAAA;AAIXiB,cAAAA,GAJW;AAKjBZ,cAAAA,aAAa,CAACY,GAAD,CAAb;AACAd,cAAAA,UAAU,CAAC,KAAD,CAAV;;AANiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVqB,UAAU;AAAA;AAAA;AAAA,KAAhB;;AASA,MAAME,UAAU;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBC,cAAAA,gBAAgB;AAChBlB,cAAAA,SAAS,CAAC,IAAD,CAAT;AAFiB;AAAA,qBAGCb,KAAK,CAACgC,UAAN,CAAiBlB,QAAjB,CAHD;;AAAA;AAGXO,cAAAA,GAHW;;AAIjB,kBAAIA,GAAG,KAAK,GAAZ,EAAiB;AACf1B,gBAAAA,kBAAkB,CAAC,mBAAD,CAAlB;AACAkB,gBAAAA,SAAS,CAAC,KAAD,CAAT;AACAoB,gBAAAA,UAAU,CAAC,YAAM;AACfhB,kBAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,UAAvB;AACD,iBAFS,EAEP,IAFO,CAAV,CAHe,CAMf;AACD,eAPD,MAOO;AACLN,gBAAAA,SAAS,CAAC,KAAD,CAAT;AACAlB,gBAAAA,kBAAkB,CAAC,aAAD,CAAlB;AACD;;AAdgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVmC,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAiBA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACG,EAAD,EAAQ;AAC/BvB,IAAAA,YAAY,CAAC,CAACD,SAAF,CAAZ;AACAK,IAAAA,WAAW,CAACmB,EAAD,CAAX;AACD,GAHD;;AAKA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,IAAD,EAAU;AAC5B,QAAIA,IAAJ,EAAU;AACR,UAAMC,GAAG,GAAGD,IAAI,CAACE,KAAL,CAAW,GAAX,CAAZ;AACA,UAAMC,IAAI,GAAGF,GAAG,CAAC,CAAD,CAAH,CAAOC,KAAP,CAAa,GAAb,CAAb;AACA,aAAOC,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAV,GAAgBF,GAAG,CAAC,CAAD,CAA1B;AACD,KAJD,MAIO;AACL,aAAO,IAAP;AACD;AACF,GARD;;AAUA,MAAMD,IAAI,GAAG,CACX;AAAEZ,IAAAA,IAAI,EAAE;AAAR,GADW,EAEX;AAAEA,IAAAA,IAAI,EAAE;AAAR,GAFW,EAGX;AAAEA,IAAAA,IAAI,EAAE;AAAR,GAHW,EAIX;AAAEA,IAAAA,IAAI,EAAE;AAAR,GAJW,EAKX;AAAEA,IAAAA,IAAI,EAAE;AAAR,GALW,EAMX;AAAEA,IAAAA,IAAI,EAAE,SAAR;AAAmBgB,IAAAA,KAAK,EAAE;AAA1B,GANW,CAAb;AASA,MAAMC,SAAS,GAAG,CAAC;AAAEjB,IAAAA,IAAI,EAAE;AAAR,GAAD,EAAmB;AAAEA,IAAAA,IAAI,EAAE;AAAR,GAAnB,EAAuC;AAAEA,IAAAA,IAAI,EAAE;AAAR,GAAvC,CAAlB;;AAEA,MAAMkB,mBAAmB;AAAA,yEAAG,kBAAOR,EAAP,EAAWS,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACR3C,KAAK,CAAC4C,YAAN,CAAmBV,EAAnB,EAAuBS,MAAvB,CADQ;;AAAA;AACpBtB,cAAAA,GADoB;AAAA,gDAEnBA,GAFmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAnBqB,mBAAmB;AAAA;AAAA;AAAA,KAAzB;;AAKA,sBACE,uDAEE,oBAAC,WAAD;AACE,IAAA,MAAM,EAAEhC,SADV;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,aAAa,EAAEoB,UAHjB;AAIE,IAAA,UAAU,EAAEC,gBAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAQGnB,MAAM,gBAAG,oBAAC,YAAD;AAAc,IAAA,IAAI,EAAEA,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAAoC,IAR7C,eASE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,MAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,EAAE,EAAC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,KAAK,EAAC,SAFR;AAGE,IAAA,SAAS,EAAC,aAHZ;AAIE,IAAA,OAAO,EAAE,iBAACiC,CAAD;AAAA,aAAO5C,OAAO,CAAC0B,IAAR,CAAa,WAAb,CAAP;AAAA,KAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFF,eAUE,oBAAC,SAAD;AAAW,IAAA,IAAI,EAAC,MAAhB;AAAuB,IAAA,IAAI,EAAEL,UAA7B;AAAyC,IAAA,MAAM,EAAEd,UAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,CADF,eAaE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGF,OAAO,gBACN,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADM,gBAGN,oBAAC,aAAD;AAAe,IAAA,MAAM,EAAEE,UAAvB;AAAmC,IAAA,IAAI,EAAE4B,IAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGpC,KAAK,CAAC8C,QAAN,IACC9C,KAAK,CAAC8C,QAAN,CAAeC,GAAf,CAAmB,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAClC,wBACE;AACE,MAAA,GAAG,EAAED,IAAI,CAACd,EADZ,CAEE;AAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKhC,IAAI,GAAG,EAAP,GAAY,EAAZ,IAAkB+C,KAAK,GAAG,CAA1B,CAAL,CAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKD,IAAI,CAACE,KAAL,GAAa,GAAb,GAAmBF,IAAI,CAACG,KAA7B,CALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKH,IAAI,CAACI,KAAV,CANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKjB,WAAW,CAACa,IAAI,CAACK,UAAN,CAAhB,CAPF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,YAAY,EAAE;AAAA,eACZX,mBAAmB,CAACM,IAAI,CAACd,EAAN,EAAUc,IAAI,CAACL,MAAf,CADP;AAAA,OAFhB;AAKE,MAAA,EAAE,EAAEK,IAAI,CAACd,EALX;AAME,MAAA,MAAM,EAAEc,IAAI,CAACL,MAAL,GAAcK,IAAI,CAACL,MAAnB,GAA4B,IANtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CATF,eAmBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,WAAD;AACE,MAAA,IAAI,EAAEF,SADR;AAEE,MAAA,SAAS,4BAAqBO,IAAI,CAACd,EAA1B,CAFX;AAGE,MAAA,OAAO,qBAAcc,IAAI,CAACd,EAAnB,CAHT;AAIE,MAAA,aAAa,EAAE;AAAA,eAAMH,gBAAgB,CAACiB,IAAI,CAACd,EAAN,CAAtB;AAAA,OAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAnBF,CADF;AA8BD,GA/BD,CAFJ,CAJJ,eAwCE,oBAAC,MAAD;AACE,IAAA,MAAM,EAAE1B,UADV;AAEE,IAAA,IAAI,EAAEN,IAFR;AAGE,IAAA,IAAI,EAAC,MAHP;AAIE,IAAA,UAAU,EAAE0B,UAJd;AAKE,IAAA,UAAU,EAAE5B,KAAK,CAACsD,SAAN,GAAkBtD,KAAK,CAACsD,SAAxB,GAAoC,IALlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxCF,CAbF,CADF,CADF,CATF,CADF;AA+ED,CA1KD;;AA4KA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAW;AACjC,SAAO;AACLV,IAAAA,QAAQ,EAAEU,KAAK,CAACC,KAAN,CAAYA,KADjB;AAELH,IAAAA,SAAS,EAAEE,KAAK,CAACC,KAAN,CAAYC;AAFlB,GAAP;AAID,CALD;;AAOA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,EAAc;AACvC,SAAO;AACLxC,IAAAA,UAAU,EAAE,oBAAClB,IAAD,EAAOC,MAAP;AAAA,aAAkByD,QAAQ,CAAC9D,cAAc,CAACI,IAAD,EAAOC,MAAP,CAAf,CAA1B;AAAA,KADP;AAEL6B,IAAAA,UAAU,EAAE,oBAACE,EAAD;AAAA,aAAQ0B,QAAQ,CAAC/D,YAAY,CAACqC,EAAD,CAAb,CAAhB;AAAA,KAFP;AAGLU,IAAAA,YAAY,EAAE,sBAACV,EAAD,EAAKS,MAAL;AAAA,aAAgBiB,QAAQ,CAAChE,cAAc,CAACsC,EAAD,EAAKS,MAAL,CAAf,CAAxB;AAAA;AAHT,GAAP;AAKD,CAND;;AAQA,eAAevD,OAAO,CAACmE,eAAD,EAAkBI,kBAAlB,CAAP,CAA6C5D,IAA7C,CAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Row, Col, Card } from \"react-bootstrap\";\nimport { useParams } from \"react-router-dom\";\nimport { Button } from \"reactstrap\";\nimport { useHistory } from \"react-router-dom\";\nimport ModifiedTable from \"../../ReusableComponents/Table/Table\";\nimport Paging from \"../../ReusableComponents/Pagination/Paging\";\nimport { connect } from \"react-redux\";\nimport SearchBar from \"../../ReusableComponents/SearchBar/SearchBar\";\nimport ModifiedLoader from \"../../ReusableComponents/Loader/loader\";\nimport ToggleButton from \"../../ReusableComponents/ToggleButton/ToggleButton\";\nimport TableAction from \"../../ReusableComponents/Actions/TableAction\";\nimport DeleteModal from \"../../ReusableComponents/CustomModal/DeleteModal/DeleteModal\";\nimport ModalSpinner from \"../../ReusableComponents/Loader/ModalSpinner/ModalSpinner\";\nimport \"./table.css\";\nimport ToggleNotification from \"../../ReusableComponents/Toggle Notifications/ToggleNotification\";\n\nimport {\n  changingStatus,\n  deletingUser,\n  gettingAllUser,\n} from \"../../../redux/actions/userAction\";\n\nconst User = (props) => {\n  const history = useHistory();\n  const { page, search } = useParams();\n  const [nameSearch, setNameSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [errorModal, setErrorModal] = useState();\n  const [modalOpen, setModalOpen] = useState(false);\n  const [loader, setLoader] = useState(false);\n  const [deleteId, setDeleteId] = useState();\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  const getData = async () => {\n    setLoading(true);\n    if (search) {\n      window.location.href = \"/users/1\";\n    }\n    const res = await props.getAllUser(page, null);\n    setErrorModal(res);\n    setLoading(false);\n  };\n\n  const searchName = async (pageNumber = page, name) => {\n    setNameSearch(name);\n    const nameString = name.replace(/[^a-zA-Z ]/g, \"%20\");\n    history.push(`/users/${pageNumber}/${nameString}`);\n    setLoading(true);\n    const res = await props.getAllUser(pageNumber, name);\n    setErrorModal(res);\n    setLoading(false);\n  };\n\n  const searchPage = async (number) => {\n    const nameString = nameSearch.replace(/[^a-zA-Z ]/g, \"%20\");\n    history.push(`/users/${number}/${nameString}`);\n    setLoading(true);\n    const res = await props.getAllUser(number, nameSearch);\n    setErrorModal(res);\n    setLoading(false);\n  };\n\n  const userDelete = async () => {\n    modalOpenHandler();\n    setLoader(true);\n    const res = await props.deleteUser(deleteId);\n    if (res === 200) {\n      ToggleNotification(\"DeleteUserSuccess\");\n      setLoader(false);\n      setTimeout(() => {\n        window.location.href = \"/users/1\";\n      }, 1000);\n      // history.push(\"/users/1\");\n    } else {\n      setLoader(false);\n      ToggleNotification(\"ServerError\");\n    }\n  };\n\n  const modalOpenHandler = (id) => {\n    setModalOpen(!modalOpen);\n    setDeleteId(id);\n  };\n\n  const updatedDate = (data) => {\n    if (data) {\n      const str = data.split(\"T\");\n      const time = str[1].split(\".\");\n      return time[0] + \" \" + str[0];\n    } else {\n      return null;\n    }\n  };\n\n  const data = [\n    { name: \"S.No.\" },\n    { name: \"Name\" },\n    { name: \"Email\" },\n    { name: \"Created-At\" },\n    { name: \"Status\" },\n    { name: \"Actions\", style: \"center\" },\n  ];\n\n  const tableData = [{ name: \"view\" }, { name: \"update\" }, { name: \"delete\" }];\n\n  const toggleButtonHandler = async (id, status) => {\n    const res = await props.changeStatus(id, status);\n    return res;\n  };\n\n  return (\n    <>\n      {/* <LogCheck status={errorModal}> */}\n      <DeleteModal\n        status={modalOpen}\n        name=\"user\"\n        deleteHandler={userDelete}\n        closeModal={modalOpenHandler}\n      />\n      {loader ? <ModalSpinner data={loader} /> : null}\n      <Row>\n        <Col>\n          <Card>\n            <Card.Header>\n              <Card.Title as=\"h5\">User Data</Card.Title>\n              <Button\n                type=\"button\"\n                color=\"primary\"\n                className=\"float-right\"\n                onClick={(e) => history.push(\"/add-user\")}\n              >\n                Add\n              </Button>\n              <SearchBar type=\"user\" name={searchName} status={errorModal} />\n            </Card.Header>\n            <Card.Body>\n              {loading ? (\n                <ModifiedLoader />\n              ) : (\n                <ModifiedTable status={errorModal} data={data}>\n                  {props.userList &&\n                    props.userList.map((item, index) => {\n                      return (\n                        <tr\n                          key={item.id}\n                          // onClick={(e) => history.push(`/user/${item.id}`)}\n                        >\n                          <td>{page * 10 - 10 + (index + 1)}</td>\n                          <td>{item.fname + \" \" + item.lname}</td>\n                          <td>{item.email}</td>\n                          <td>{updatedDate(item.created_at)}</td>\n                          {/* <td>{item.created_at}</td> */}\n                          <td>\n                            <ToggleButton\n                              name=\"user\"\n                              changeToggle={() =>\n                                toggleButtonHandler(item.id, item.status)\n                              }\n                              id={item.id}\n                              status={item.status ? item.status : null}\n                            />\n                          </td>\n                          <td>\n                            <TableAction\n                              data={tableData}\n                              updateURL={`/update-user?id=${item.id}`}\n                              viewURL={`/user?id=${item.id}`}\n                              deleteHandler={() => modalOpenHandler(item.id)}\n                            />\n                          </td>\n                        </tr>\n                      );\n                    })}\n                </ModifiedTable>\n              )}\n              <Paging\n                status={errorModal}\n                page={page}\n                type=\"user\"\n                searchPage={searchPage}\n                totalCount={props.totalPage ? props.totalPage : null}\n              />\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n      {/* </LogCheck> */}\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    userList: state.users.users,\n    totalPage: state.users.pages,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getAllUser: (page, search) => dispatch(gettingAllUser(page, search)),\n    deleteUser: (id) => dispatch(deletingUser(id)),\n    changeStatus: (id, status) => dispatch(changingStatus(id, status)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(User);\n"]},"metadata":{},"sourceType":"module"}